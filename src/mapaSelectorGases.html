<!-- 
    mapa.html
    Autor: Sergi Sirvent Sempere
    Fecha: 10/2021
    Este archivo se encarga de contener el contenido de la página que se muestra el mapa
-->
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Angle Corp</title>

    <!-- Links estilos-->
        <link rel="stylesheet" href="Assets/css/bootstrap.min.css">
        <!-- Css -->
        <link rel="stylesheet" href="Assets/css/cssGeneral.css" type="text/css">
        <!-- Fonts -->
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@100;400&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css2?family=Zen+Kaku+Gothic+Antique:wght@300&display=swap" rel="stylesheet">
        <!-- Favicon -->
        <link rel="shortcut icon" href="Assets/images/LOGO.png">
		<!-- LeefLet CSS -->
        <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="crossorigin=""/>
		<link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.css" />
	<link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.Default.css" />
	<link rel="stylesheet" href="http://code.ionicframework.com/ionicons/1.5.2/css/ionicons.min.css">
	<link rel="stylesheet" href="Assets/css/leaflet.awesome-markers.css">

		<!-- Leaflet JS-->
		<script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js" integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="crossorigin=""></script>
		<script src="https://unpkg.com/leaflet.markercluster@1.4.1/dist/leaflet.markercluster-src.js"></script>
		<script src="https://unpkg.com/leaflet.markercluster.layersupport@2.0.1/dist/leaflet.markercluster.layersupport.js"></script>
		<script src="Assets/js/leaflet.awesome-markers.js"></script>
		<script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
		<script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
		<script src="Assets/js/leaflet-heat.js"></script>

		<!-- Boostrap JS-->
		<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

    <!-- ---------------------------------------------------- -->
      <!-- incluimos los metodos de la logica fake -->
      <script src="LogicaFake/obtenerMedicionesGlobalesFecha.js"></script>
      <script src="LogicaFake/comprobarAcceso.js"></script>
	  <script>
		function settearFechaDeHoy(){
			var calendario = document.getElementById("inputFechaMapa")
		
			var fecha = new Date()
			var stringAnyo = fecha.getFullYear()
			var stringMes = fecha.getMonth()+1
			var stringDia = fecha.getDate()
			
			if(stringMes < 10){
			stringMes  = '0'+stringMes
			}
			if(stringDia < 10){
			stringDia  = '0'+stringDia
			}
			
			var hoy = stringAnyo+"-" + stringMes+"-" + stringDia
			
			calendario.value = hoy
			generarMapaAFecha(calendario.value)
			comprobarAccesoAdmin()
			
			//console.log(hoy)
			
		}
	  </script>
</head>
<body class="bodyMediciones" onload="settearFechaDeHoy()" >
    <header class="header">
        
        <!-- Logo --------------------------------------------------------------------->
        <a href="index.html"><img class="logo" src="Assets/images/LOGO.png" alt="Imagen del logo"></a>
        <!-- Nav --------------------------------------------------------------------->
        <nav class="navbar navbar-expand-lg navbar-light">

                  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                  </button>

                  <div class="collapse navbar-collapse" id="navbarSupportedContent">

                     <ul class="navbar-nav mr-auto">

                      <li class="nav-item">
                        <a class="nav-link" href="index.html">INICIO </a>
                      </li>

                      <li class="nav-item">
                        <a class="nav-link" href="mapa.html">MAPA</a>
                      </li>

                      <li class="nav-item">
                        <a class="nav-link" href="index.html#containerContaminantes">CONTAMINANTES</a>
                      </li>
                      <li class="nav-item">
                        <a class="nav-link" href="index.html#containerSobreNosotros">¿QUIÉNES SOMOS?</a>
                      </li>
                         <li class="nav-item">
                             <a class="nav-link" style="cursor: pointer" onclick="comprobarAcceso()" >MI PERFIL</a>
                         </li>

                    </ul>

                  </div>
            </nav>
          
      </header>
    <div style="margin-bottom: 100px"class="container">
        
        <div class="containerMapa">

            <div class="containerTituloMapa">
                <div>
                    <img src="Assets/images/mapa.png" alt="Imagen titulo mapa">
					
                    <h1 class="tituloMediciones">Mapa de contaminantes</h1>
                </div>
				
                <div>
                   <input id="inputFechaMapa" class="inputTextoLogin" type="date" name="fechaMap" onchange="handler(event);" style="margin-right:10px;">
                   <a href="#popup"><img src="Assets/images/iconoLeyenda.png" alt="Imagen libro de leyenda"></a> 
                </div>
                
            </div>
            <div id="contenedorMapa" class="containerMapaHijo">
			<!--
				<img  class="imagenMapa" src="Assets/images/imagenMapaGandia.png" alt="Imagen del mapa de Gandia">			
			-->
                <div id="map"></div>
            </div>
            
            
            
        </div>

    </div>
    
    <div id="popup" class="overlay">
        
            <div id="popupBody">
               <div class="cabeceraPopUp">
                    <div>
                       <img src="Assets/images/iconoLeyenda.png" alt="Icono leyenda">
                        <h2>Leyenda</h2>
                    </div>
                    
                    <a id="cerrar" href="#"><img src="Assets/images/boton-de-cierre%20.png" alt="Imagen cerrar popUp"></a>
                 
               </div>
                
                
                <div class="popupContent">
                    <ul>
                        <li>Color <span style="color: red">Rojo</span>: Alto valor en concentración del contaminante en el aire.</li>
                        <li>Color <span style="color: orange">Amarillo</span>: Valor medio en concentración del contaminante en el aire.</li>
                        <li>Color <span style="color: green">Verde</span>: Bajo valor en concentración del contaminante en el aire.</li>
                    </ul>
                </div>
            </div>
            
        </div>
    
    <div class="footer">
     
      <a href="http://www.upv.es/es"><img  id="logoUpvFooter" src="Assets/images/logoUPvBlanco.png" alt="logoUPVBlanco"></a>
      <div class="textosFooter">
          <p style="margin-left: : 2px">&copy; ANGLE CORP</p>
          <div style="border-left: 2px solid aliceblue;margin-left: 2px;margin: 5px;">|</div>
          <p>EPSG</p>
          <div style="border-left: 2px solid aliceblue;margin-left: 2px;margin: 5px;">|</div>
          <p><a href="mailto:anglecorp@epsg.upv.es">anglecorp@epsg.upv.es</a></p>
          <div style="border-left: 2px solid aliceblue;margin-left: 2px;margin: 5px;">|</div>
          <p>2021</p>
          
          
      </div>
      <a href="index.html"><img src="Assets/images/LOGO.png" alt="Logo de Angle Corp"></a>
      
      
      
      
   </div>
</body>
<script src="LogicaFake/LogicaMapaSelector.js">
</script>
</html>